<%- include('partials/header') %>

<div class="container">
    <div class="chat-container">
        <header class="chat-header">
          <h1><img src="<%= group.groupIcon %>" alt=""> <span id="group-name"><%= group.name %></span></h1>
          <a href="/group/<%= group._id %>/leave" class="btn btn-danger btn-lg">Leave Group</a>
        </header>
        <main class="chat-main">
          <div class="chat-sidebar">
            <h3><i class="fas fa-comments"></i> Group Description:</h3>
            <h2><%= group.description %></h2>
            <h3><i class="fas fa-users"></i> Users</h3>
            <ul id="users">
                <% group.members.forEach((member)=>{%>
                    <li><%= member.username %> <span  id="<%= member.username %>" class=""></span></li>
                <%})%>
            </ul>
          </div>
          <div class="chat-messages">
            <% group.messages.forEach((message)=>{%>
                <div class="message">
                    <p class="meta"><%= message.author.username %>  <span> <small><%= message.time %></small></span></p>
                    <p class="text">
                        <%= message.text %>
                    </p>
                  </div>
            <%})%>
          </div>
        </main>
        <div class="chat-form-container">
          <form id="chat-form">
            <input
              id="msg"
              name="message"
              type="text"
              placeholder="Enter Message"
              required
              autocomplete="off"
            />
            <button id="submit-btn" class="btn btn-primary btn-lg"><i class="fas fa-paper-plane"></i> Send</button>
          </form>
        </div>
      </div>
</div>
<script>
  const currentUser = "<%= currentUser.username %>";
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qs/6.9.3/qs.min.js" integrity="sha256-lSPkSu/D04IeqWOhTgTf5tLzNFEc37oNE9ysGS9PdK4=" crossorigin="anonymous"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="/js/main.js"></script>


<%- include('partials/footer') %>